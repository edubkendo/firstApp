(function(){function a(b){var c=a.resolve(b),d=a.modules[c];if(!d)throw new Error('failed to require "'+b+'"');return d.exports||(d.exports={},d.call(d.exports,d,d.exports,a.relative(c))),d.exports}a.modules={},a.resolve=function(b){var c=b,d=b+".js",e=b+"/index.js";return a.modules[d]&&d||a.modules[e]&&e||c},a.register=function(b,c){a.modules[b]=c},a.relative=function(b){return function(c){if("."!=c.charAt(0))return a(c);var d=b.split("/"),e=c.split("/");d.pop();for(var f=0;f<e.length;f++){var g=e[f];".."==g?d.pop():"."!=g&&d.push(g)}return a(d.join("/"))}},a.register("browser/debug.js",function(a,b,c){a.exports=function(a){return function(){}}}),a.register("browser/diff.js",function(a,b,c){}),a.register("browser/events.js",function(a,b,c){function d(a){return"[object Array]"=={}.toString.call(a)}function e(){}b.EventEmitter=e,e.prototype.on=function(a,b){return this.$events||(this.$events={}),this.$events[a]?d(this.$events[a])?this.$events[a].push(b):this.$events[a]=[this.$events[a],b]:this.$events[a]=b,this},e.prototype.addListener=e.prototype.on,e.prototype.once=function(a,b){function d(){c.removeListener(a,d),b.apply(this,arguments)}var c=this;return d.listener=b,this.on(a,d),this},e.prototype.removeListener=function(a,b){if(this.$events&&this.$events[a]){var c=this.$events[a];if(d(c)){var e=-1;for(var f=0,g=c.length;f<g;f++)if(c[f]===b||c[f].listener&&c[f].listener===b){e=f;break}if(e<0)return this;c.splice(e,1),c.length||delete this.$events[a]}else(c===b||c.listener&&c.listener===b)&&delete this.$events[a]}return this},e.prototype.removeAllListeners=function(a){return a===undefined?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},e.prototype.listeners=function(a){return this.$events||(this.$events={}),this.$events[a]||(this.$events[a]=[]),d(this.$events[a])||(this.$events[a]=[this.$events[a]]),this.$events[a]},e.prototype.emit=function(a){if(!this.$events)return!1;var b=this.$events[a];if(!b)return!1;var c=[].slice.call(arguments,1);if("function"==typeof b)b.apply(this,c);else{if(!d(b))return!1;var e=b.slice();for(var f=0,g=e.length;f<g;f++)e[f].apply(this,c)}return!0}}),a.register("browser/fs.js",function(a,b,c){}),a.register("browser/path.js",function(a,b,c){}),a.register("browser/progress.js",function(a,b,c){function d(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}a.exports=d,d.prototype.size=function(a){return this._size=a,this},d.prototype.text=function(a){return this._text=a,this},d.prototype.fontSize=function(a){return this._fontSize=a,this},d.prototype.font=function(a){return this._font=a,this},d.prototype.update=function(a){return this.percent=a,this},d.prototype.draw=function(a){var b=Math.min(this.percent,100),c=this._size,d=c/2,e=d,f=d,g=d-1,h=this._fontSize;a.font=h+"px "+this._font;var i=Math.PI*2*(b/100);a.clearRect(0,0,c,c),a.strokeStyle="#9f9f9f",a.beginPath(),a.arc(e,f,g,0,i,!1),a.stroke(),a.strokeStyle="#eee",a.beginPath(),a.arc(e,f,g-1,0,i,!0),a.stroke();var j=this._text||(b|0)+"%",k=a.measureText(j).width;return a.fillText(j,e-k/2+1,f+h/2-1),this}}),a.register("browser/tty.js",function(a,b,c){b.isatty=function(){return!0},b.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}}),a.register("context.js",function(a,b,c){function d(){}a.exports=d,d.prototype.runnable=function(a){return this._runnable=a,this},d.prototype.timeout=function(a){return this._runnable.timeout(a),this},d.prototype.inspect=function(){return JSON.stringify(this,function(a,b){return"_runnable"==a?undefined:b},2)}}),a.register("hook.js",function(a,b,c){function e(a,b){d.call(this,a,b),this.type="hook"}var d=c("./runnable");a.exports=e,e.prototype=new d,e.prototype.constructor=e}),a.register("interfaces/bdd.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){var b=[a];a.on("pre-require",function(a){a.xdescribe=function(){},a.xit=function(){},a.before=function(a){b[0].beforeAll(a)},a.after=function(a){b[0].afterAll(a)},a.beforeEach=function(a){b[0].beforeEach(a)},a.afterEach=function(a){b[0].afterEach(a)},a.describe=function(a,c){var e=d.create(b[0],a);b.unshift(e),c(),b.shift()},a.it=function(a,c){b[0].addTest(new e(a,c))}})}}),a.register("interfaces/exports.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){function c(a){var f;for(var g in a)if("function"==typeof a[g]){var h=a[g];switch(g){case"before":b[0].beforeAll(h);break;case"after":b[0].afterAll(h);break;case"beforeEach":b[0].beforeEach(h);break;case"afterEach":b[0].afterEach(h);break;default:b[0].addTest(new e(g,h))}}else{var f=d.create(b[0],g);b.unshift(f),c(a[g]),b.shift()}}var b=[a];a.on("require",c)}}),a.register("interfaces/index.js",function(a,b,c){b.bdd=c("./bdd"),b.tdd=c("./tdd"),b.qunit=c("./qunit"),b.exports=c("./exports")}),a.register("interfaces/qunit.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){var b=[a];a.on("pre-require",function(a){a.before=function(a){b[0].beforeAll(a)},a.after=function(a){b[0].afterAll(a)},a.beforeEach=function(a){b[0].beforeEach(a)},a.afterEach=function(a){b[0].afterEach(a)},a.suite=function(a){b.length>1&&b.shift();var c=d.create(b[0],a);b.unshift(c)},a.test=function(a,c){b[0].addTest(new e(a,c))}})}}),a.register("interfaces/tdd.js",function(a,b,c){var d=c("../suite"),e=c("../test");a.exports=function(a){var b=[a];a.on("pre-require",function(a){a.setup=function(a){b[0].beforeEach(a)},a.teardown=function(a){b[0].afterEach(a)},a.suiteSetup=function(a){b[0].beforeAll(a)},a.suiteTeardown=function(a){b[0].afterAll(a)},a.suite=function(a,c){var e=d.create(b[0],a);b.unshift(e),c(),b.shift()},a.test=function(a,c){b[0].addTest(new e(a,c))}})}}),a.register("mocha.js",function(a,b,c){function e(a){return __dirname+"/../images/"+a+".png"}function f(a){a=a||{},this.files=[],this.options=a,this.grep(a.grep),this.suite=new b.Suite("",new b.Context),this.ui(a.ui),this.reporter(a.reporter),a.timeout&&this.suite.timeout(a.timeout)}var d=c("browser/path");b=a.exports=f,b.version="1.0.3",b.utils=c("./utils"),b.interfaces=c("./interfaces"),b.reporters=c("./reporters"),b.Runnable=c("./runnable"),b.Context=c("./context"),b.Runner=c("./runner"),b.Suite=c("./suite"),b.Hook=c("./hook"),b.Test=c("./test"),f.prototype.addFile=function(a){return this.files.push(a),this},f.prototype.reporter=function(a){a=a||"dot",this._reporter=c("./reporters/"+a);if(!this._reporter)throw new Error('invalid reporter "'+a+'"');return this},f.prototype.ui=function(a){a=a||"bdd",this._ui=b.interfaces[a];if(!this._ui)throw new Error('invalid interface "'+a+'"');return this._ui=this._ui(this.suite),this},f.prototype.loadFiles=function(){var a=this.suite;this.files.forEach(function(b){b=d.resolve(b),a.emit("pre-require",global,b),a.emit("require",c(b),b),a.emit("post-require",global,b)})},f.prototype.growl=function(a,b){var d=c("growl");a.on("end",function(){var c=b.stats;if(c.failures){var f=c.failures+" of "+a.total+" tests failed";d(f,{title:"Failed",image:e("fail")})}else d(c.passes+" tests passed in "+c.duration+"ms",{title:"Passed",image:e("pass")})})},f.prototype.grep=function(a){return this.options.grep="string"==typeof a?new RegExp(a):a,this},f.prototype.run=function(a){this.loadFiles();var c=this.suite,d=this.options,e=new b.Runner(c),f=new this._reporter(e);return e.ignoreLeaks=d.ignoreLeaks,d.grep&&e.grep(d.grep),d.globals&&e.globals(d.globals),d.growl&&this.growl(e,f),e.run(a)}}),a.register("reporters/base.js",function(a,b,c){function m(a){var c=this,d=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},e=this.failures=[];if(!a)return;this.runner=a,a.on("start",function(){d.start=new f}),a.on("suite",function(a){d.suites=d.suites||0,a.root||d.suites++}),a.on("test end",function(a){d.tests=d.tests||0,d.tests++}),a.on("pass",function(a){d.passes=d.passes||0;var c=b.slow/2;a.speed=a.duration>b.slow?"slow":a.duration>c?"medium":"fast",d.passes++}),a.on("fail",function(a,b){d.failures=d.failures||0,d.failures++,a.err=b,e.push(a)}),a.on("end",function(){d.end=new f,d.duration=new f-d.start}),a.on("pending",function(){d.pending++})}function n(a,b){return a=String(a),Array(b-a.length+1).join(" ")+a}function o(a,b){return e["diff"+b](a.actual,a.expected).map(function(a){return/^(\n+)$/.test(a.value)&&(a.value=Array(++RegExp.$1.length).join("<newline>")),a.added?p("diff added",a.value):a.removed?p("diff removed",a.value):a.value}).join("")}function p(a,b){return b.split("\n").map(function(b){return l(a,b)}).join("\n")}var d=c("browser/tty"),e=c("browser/diff"),f=global.Date,g=global.setTimeout,h=global.setInterval,i=global.clearTimeout,j=global.clearInterval,k=d.isatty(1)&&d.isatty(2);b=a.exports=m,b.useColors=k,b.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41};var l=b.color=function(a,c){return b.useColors?"["+b.colors[a]+"m"+c+"[0m":c};b.window={width:k?process.stdout.getWindowSize?process.stdout.getWindowSize(1)[0]:d.getWindowSize()[1]:75},b.cursor={hide:function(){process.stdout.write("[?25l")},show:function(){process.stdout.write("[?25h")},deleteLine:function(){process.stdout.write("[2K")},beginningOfLine:function(){process.stdout.write("[0G")},CR:function(){b.cursor.deleteLine(),b.cursor.beginningOfLine()}},b.slow=75,b.list=function(a){console.error(),a.forEach(function(a,b){var c=l("error title","  %s) %s:\n")+l("error message","     %s")+l("error stack","\n%s\n"),d=a.err,e=d.message||"",f=d.stack||e,g=f.indexOf(e)+e.length,h=f.slice(0,g),i=d.actual,j=d.expected;if("string"==typeof i&&"string"==typeof j){var k=Math.max(i.length,j.length);k<20?h=o(d,"Chars"):h=o(d,"Words");var m=h.split("\n");if(m.length>4){var p=String(m.length).length;h=m.map(function(a,b){return n(++b,p)+" |"+" "+a}).join("\n")}h="\n"+l("diff removed","actual")+" "+l("diff added","expected")+"\n\n"+h+"\n",h=h.replace(/^/gm,"      "),c=l("error title","  %s) %s:\n%s")+l("error stack","\n%s\n")}f=f.slice(g?g+1:g).replace(/^/gm,"  "),console.error(c,b+1,a.fullTitle(),h,f)})},m.prototype.epilogue=function(){function d(a){return 1==a?"test":"tests"}var a=this.stats,b,c;console.log();if(a.failures){b=l("bright fail","  ✖")+l("fail"," %d of %d %s failed")+l("light",":"),console.error(b,a.failures,this.runner.total,d(this.runner.total)),m.list(this.failures),console.error();return}b=l("bright pass","  ✔")+l("green"," %d %s complete")+l("light"," (%dms)"),console.log(b,a.tests||0,d(a.tests),a.duration),a.pending&&(b=l("pending","  •")+l("pending"," %d %s pending"),console.log(b,a.pending,d(a.pending))),console.log()}}),a.register("reporters/doc.js",function(a,b,c){function f(a){function i(){return Array(h).join("  ")}d.call(this,a);var b=this,c=this.stats,f=a.total,h=2;a.on("suite",function(a){if(a.root)return;++h,console.log('%s<section class="suite">',i()),++h,console.log("%s<h1>%s</h1>",i(),a.title),console.log("%s<dl>",i())}),a.on("suite end",function(a){if(a.root)return;console.log("%s</dl>",i()),--h,console.log("%s</section>",i()),--h}),a.on("pass",function(a){console.log("%s  <dt>%s</dt>",i(),a.title);var b=e.escape(g(a.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",i(),b)})}function g(a){a=a.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var b=a.match(/^\n?( *)/)[1].length,c=new RegExp("^ {"+b+"}","gm");return a=a.replace(c,""),a}var d=c("./base"),e=c("../utils");b=a.exports=f}),a.register("reporters/dot.js",function(a,b,c){function f(a){d.call(this,a);var b=this,c=this.stats,f=d.window.width*.75|0,g=0;a.on("start",function(){process.stdout.write("\n  ")}),a.on("pending",function(a){process.stdout.write(e("pending","."))}),a.on("pass",function(a){++g%f==0&&process.stdout.write("\n  "),"slow"==a.speed?process.stdout.write(e("bright yellow",".")):process.stdout.write(e(a.speed,"."))}),a.on("fail",function(a,b){++g%f==0&&process.stdout.write("\n  "),process.stdout.write(e("fail","."))}),a.on("end",function(){console.log(),b.epilogue()})}var d=c("./base"),e=d.color;b=a.exports=f,f.prototype=new d,f.prototype.constructor=f}),a.register("reporters/html-cov.js",function(a,b,c){function f(a){var b=c("jade"),f=__dirname+"/templates/coverage.jade",h=e.readFileSync(f,"utf8"),i=b.compile(h,{filename:f}),j=this;d.call(this,a,!1),a.on("end",function(){process.stdout.write(i({cov:j.cov,coverageClass:g}))})}function g(a){return a>=75?"high":a>=50?"medium":a>=25?"low":"terrible"}var d=c("./json-cov"),e=c("browser/fs");b=a.exports=f}),a.register("reporters/html.js",function(a,b,c){function n(a){d.call(this,a);var b=this,c=this.stats,e=a.total,g=document.getElementById("mocha"),i=p(m),j=i.getElementsByTagName("li"),k=j[1].getElementsByTagName("em")[0],l=j[2].getElementsByTagName("em")[0],n=j[3].getElementsByTagName("em")[0],t=i.getElementsByTagName("canvas")[0],u=p('<ul id="report"></ul>'),v=[u],w,x;t.getContext&&(x=t.getContext("2d"),w=new f);if(!g)return o("#mocha div missing, add it to your document");g.appendChild(i),g.appendChild(u),w&&w.size(40),a.on("suite",function(a){if(a.root)return;var b=p('<li class="suite"><h1>%s</h1></li>',a.title);v[0].appendChild(b),v.unshift(document.createElement("ul")),b.appendChild(v[0])}),a.on("suite end",function(a){if(a.root)return;v.shift()}),a.on("fail",function(b,c){("hook"==b.type||c.uncaught)&&a.emit("test end",b)}),a.on("test end",function(a){var b=c.tests/e*100|0;w&&w.update(b).draw(x);var d=new h-c.start;q(k,c.passes),q(l,c.failures),q(n,(d/1e3).toFixed(2));if("passed"==a.state)var f=p('<li class="test pass %e"><h2>%e<span class="duration">%ems</span></h2></li>',a.speed,a.title,a.duration);else if(a.pending)var f=p('<li class="test pass pending"><h2>%e</h2></li>',a.title);else{var f=p('<li class="test fail"><h2>%e</h2></li>',a.title),g=a.err.stack||a.err.toString();~g.indexOf(a.err.message)||(g=a.err.message+"\n"+g),"[object Error]"==g&&(g=a.err.message),!a.err.stack&&a.err.sourceURL&&a.err.line!==undefined&&(g+="\n("+a.err.sourceURL+":"+a.err.line+")"),f.appendChild(p('<pre class="error">%e</pre>',g))}var i=f.getElementsByTagName("h2")[0];r(i,"click",function(){j.style.display="none"==j.style.display?"block":"none"});if(!a.pending){var j=p("<pre><code>%e</code></pre>",s(a.fn.toString()));f.appendChild(j),j.style.display="none"}v[0].appendChild(f)})}function o(a){document.body.appendChild(p('<div id="error">%s</div>',a))}function p(a){var b=arguments,c=document.createElement("div"),d=1;return c.innerHTML=a.replace(/%([se])/g,function(a,c){switch(c){case"s":return String(b[d++]);case"e":return g(b[d++])}}),c.firstChild}function q(a,b){a.textContent?a.textContent=b:a.innerText=b}function r(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function s(a){a=a.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var b=a.match(/^\n?( *)/)[1].length,c=new RegExp("^ {"+b+"}","gm");return a=a.replace(c,"").replace(/^\s+/,""),a}var d=c("./base"),e=c("../utils"),f=c("../browser/progress"),g=e.escape,h=global.Date,i=global.setTimeout,j=global.setInterval,k=global.clearTimeout,l=global.clearInterval;b=a.exports=n;var m='<ul id="stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes">passes: <em>0</em></li><li class="failures">failures: <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>'}),a.register("reporters/index.js",function(a,b,c){b.Base=c("./base"),b.Dot=c("./dot"),b.Doc=c("./doc"),b.TAP=c("./tap"),b.JSON=c("./json"),b.HTML=c("./html"),b.List=c("./list"),b.Min=c("./min"),b.Spec=c("./spec"),b.Progress=c("./progress"),b.Landing=c("./landing"),b.JSONCov=c("./json-cov"),b.HTMLCov=c("./html-cov"),b.JSONStream=c("./json-stream"),b.XUnit=c("./xunit"),b.Teamcity=c("./teamcity")}),a.register("reporters/json-cov.js",function(a,b,c){function e(a,b){var c=this,b=1==arguments.length?!0:b;d.call(this,a);var e=[],g=[],i=[];a.on("test end",function(a){e.push(a)}),a.on("pass",function(a){i.push(a)}),a.on("fail",function(a){g.push(a)}),a.on("end",function(){var a=global._$jscoverage||{},d=c.cov=f(a);d.stats=c.stats,d.tests=e.map(h),d.failures=g.map(h),d.passes=i.map(h);if(!b)return;process.stdout.write(JSON.stringify(d,null,2))})}function f(a){var b={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var c in a){var d=g(c,a[c]);b.files.push(d),b.hits+=d.hits,b.misses+=d.misses,b.sloc+=d.sloc}return b.sloc>0&&(b.coverage=b.hits/b.sloc*100),b}function g(a,b){var c={filename:a,coverage:0,hits:0,misses:0,sloc:0,source:{}};return b.source.forEach(function(a,d){d++,b[d]===0?(c.misses++,c.sloc++):b[d]!==undefined&&(c.hits++,c.sloc++),c.source[d]={source:a,coverage:b[d]===undefined?"":b[d]}}),c.coverage=c.hits/c.sloc*100,c}function h(a){return{title:a.title,fullTitle:a.fullTitle(),duration:a.duration}}var d=c("./base");b=a.exports=e}),a.register("reporters/json-stream.js",function(a,b,c){function f(a){d.call(this,a);var b=this,c=this.stats,e=a.total;a.on("start",function(){console.log(JSON.stringify(["start",{total:e}]))}),a.on("pass",function(a){console.log(JSON.stringify(["pass",g(a)]))}),a.on("fail",function(a,b){console.log(JSON.stringify(["fail",g(a)]))}),a.on("end",function(){process.stdout.write(JSON.stringify(["end",b.stats]))})}function g(a){return{title:a.title,fullTitle:a.fullTitle(),duration:a.duration}}var d=c("./base"),e=d.color;b=a.exports=f}),a.register("reporters/json.js",function(a,b,c){function g(a){var b=this;d.call(this,a);var c=[],e=[],f=[];a.on("test end",function(a){c.push(a)}),a.on("pass",function(a){f.push(a)}),a.on("fail",function(a){e.push(a)}),a.on("end",function(){var a={stats:b.stats,tests:c.map(h),failures:e.map(h),passes:f.map(h)};process.stdout.write(JSON.stringify(a,null,2))})}function h(a){return{title:a.title,fullTitle:a.fullTitle(),duration:a.duration}}var d=c("./base"),e=d.cursor,f=d.color;b=a.exports=g}),a.register("reporters/landing.js",function(a,b,c){function g(a){function m(){var a=Array(g).join("-");return"  "+f("runway",a)}d.call(this,a);var b=this,c=this.stats,g=d.window.width*.75|0,h=a.total,i=process.stdout,j=f("plane","✈"),k=-1,l=0;a.on("start",function(){i.write("\n  "),e.hide()}),a.on("test end",function(a){var b=-1==k?g*++l/h|0:k;"failed"==a.state&&(j=f("plane crash","✈"),k=b),i.write("[4F\n\n"),i.write(m()),i.write("\n  "),i.write(f("runway",Array(b).join("⋅"))),i.write(j),i.write(f("runway",Array(g-b).join("⋅")+"\n")),i.write(m()),i.write("[0m")}),a.on("end",function(){e.show(),console.log(),b.epilogue()})}var d=c("./base"),e=d.cursor,f=d.color;b=a.exports=g,d.colors.plane=0,d.colors["plane crash"]=31,d.colors.runway=90,g.prototype=new d,g.prototype.constructor=g}),a.register("reporters/list.js",function(a,b,c){function g(a){d.call(this,a);var b=this,c=this.stats,g=0;a.on("start",function(){console.log()}),a.on("test",function(a){process.stdout.write(f("pass","    "+a.fullTitle()+": "))}),a.on("pending",function(a){var b=f("checkmark","  -")+f("pending"," %s");console.log(b,a.fullTitle())}),a.on("pass",function(a){var b=f("checkmark","  ✓")+f("pass"," %s: ")+f(a.speed,"%dms");e.CR(),console.log(b,a.fullTitle(),a.duration)}),a.on("fail",function(a,b){e.CR(),console.log(f("fail","  %d) %s"),++g,a.fullTitle())}),a.on("end",b.epilogue.bind(b))}var d=c("./base"),e=d.cursor,f=d.color;b=a.exports=g,g.prototype=new d,g.prototype.constructor=g}),a.register("reporters/markdown.js",function(a,b,c){function f(a){function j(a){return Array(h).join("#")+" "+a}function k(){return Array(h).join("  ")}function l(a,b){var c=b;return b=b[a.title]=b[a.title]||{suite:a},a.suites.forEach(function(a){l(a,b)}),c}function m(a,b){++b;var c="",d;for(var f in a){if("suite"==f)continue;f&&(d=" - ["+f+"](#"+e.slug(a[f].suite.fullTitle())+")\n"),f&&(c+=Array(b).join("  ")+d),c+=m(a[f],b)}return--b,c}function n(a){var b=l(a,{});return m(b,0)}d.call(this,a);var b=this,c=this.stats,f=a.total,h=0,i="";n(a.suite),a.on("suite",function(a){++h;var b=e.slug(a.fullTitle());i+='<a name="'+b+'" />'+"\n",i+=j(a.title)+"\n"}),a.on("suite end",function(a){--h}),a.on("pass",function(a){var b=g(a.fn.toString());i+=a.title+".\n",i+="\n```js",i+=b+"\n",i+="```\n\n"}),a.on("end",function(){process.stdout.write("# TOC\n"),process.stdout.write(n(a.suite)),process.stdout.write(i)})}function g(a){a=a.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var b=a.match(/^\n?( *)/)[1].length,c=new RegExp("^ {"+b+"}","gm");return a=a.replace(c,""),a}var d=c("./base"),e=c("../utils");b=a.exports=f}),a.register("reporters/min.js",function(a,b,c){function e(a){d.call(this,a),a.on("start",function(){process.stdout.write("[2J"),process.stdout.write("[1;3H")}),a.on("end",this.epilogue.bind(this))}var d=c("./base");b=a.exports=e,e.prototype=new d,e.prototype.constructor=e}),a.register("reporters/progress.js",function(a,b,c){function g(a,b){d.call(this,a);var c=this,b=b||{},g=this.stats,h=d.window.width*.5|0,i=a.total,j=0,k=Math.max;b.open=b.open||"[",b.complete=b.complete||"▬",b.incomplete=b.incomplete||"⋅",b.close=b.close||"]",b.verbose=!1,a.on("start",function(){console.log(),e.hide()}),a.on("test end",function(){j++;var a=i-j,c=j/i,d=h*c|0,g=h-d;e.CR(),process.stdout.write("[J"),process.stdout.write(f("progress","  "+b.open)),process.stdout.write(Array(d).join(b.complete)),process.stdout.write(Array(g).join(b.incomplete)),process.stdout.write(f("progress",b.close)),b.verbose&&process.stdout.write(f("progress"," "+j+" of "+i))}),a.on("end",function(){e.show(),console.log(),c.epilogue()})}var d=c("./base"),e=d.cursor,f=d.color;b=a.exports=g,d.colors.progress=90,g.prototype=new d,g.prototype.constructor=g}),a.register("reporters/spec.js",function(a,b,c){function g(a){function i(){return Array(g).join("  ")}d.call(this,a);var b=this,c=this.stats,g=0,h=0;a.on("start",function(){console.log()}),a.on("suite",function(a){++g,console.log(f("suite","%s%s"),i(),a.title)}),a.on("suite end",function(a){--g,1==g&&console.log()}),a.on("test",function(a){process.stdout.write(i()+f("pass","  ◦ "+a.title+": "))}),a.on("pending",function(a){var b=i()+f("pending","  - %s");console.log(b,a.title)}),a.on("pass",function(a){if("fast"==a.speed){var b=i()+f("checkmark","  ✓")+f("pass"," %s ");e.CR(),console.log(b,a.title)}else{var b=i()+f("checkmark","  ✓")+f("pass"," %s ")+f(a.speed,"(%dms)");e.CR(),console.log(b,a.title,a.duration)}}),a.on("fail",function(a,b){e.CR(),console.log(i()+f("fail","  %d) %s"),++h,a.title)}),a.on("end",b.epilogue.bind(b))}var d=c("./base"),e=d.cursor,f=d.color;b=a.exports=g,g.prototype=new d,g.prototype.constructor=g}),a.register("reporters/tap.js",function(a,b,c){function g(a){d.call(this,a);var b=this,c=this.stats,e=a.total,f=1;a.on("start",function(){console.log("%d..%d",1,e)}),a.on("test end",function(){++f}),a.on("pending",function(a){console.log("ok %d %s # SKIP -",f,h(a))}),a.on("pass",function(a){console.log("ok %d %s",f,h(a))}),a.on("fail",function(a,b){console.log("not ok %d %s",f,h(a)),console.log(b.stack.replace(/^/gm,"  "))})}function h(a){return a.fullTitle().replace(/#/g,"")}var d=c("./base"),e=d.cursor,f=d.color;b=a.exports=g}),a.register("reporters/teamcity.js",function(a,b,c){function e(a){d.call(this,a);var b=this.stats;a.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")}),a.on("test",function(a){console.log("##teamcity[testStarted name='"+f(a.fullTitle())+"']")}),a.on("fail",function(a,b){console.log("##teamcity[testFailed name='"+f(a.fullTitle())+"' message='"+f(b.message)+"']")}),a.on("pending",function(a){console.log("##teamcity[testIgnored name='"+f(a.fullTitle())+"' message='pending']")}),a.on("test end",function(a){console.log("##teamcity[testFinished name='"+f(a.fullTitle())+"' duration='"+a.duration+"']")}),a.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+b.duration+"']")})}function f(a){return a.replace(/\|/g,"||").replace(/\n/g,"|n").replace(/\r/g,"|r").replace(/\[/g,"|[").replace(/\]/g,"|]").replace(/\u0085/g,"|x").replace(/\u2028/g,"|l").replace(/\u2029/g,"|p").replace(/'/g,"|'")}var d=c("./base");b=a.exports=e}),a.register("reporters/xunit.js",function(a,b,c){function l(a){d.call(this,a);var b=this.stats,c=[],e=this;a.on("test end",function(a){c.push(a)}),a.on("end",function(){console.log(n("testsuite",{name:"Mocha Tests",tests:b.tests,failures:b.failures,errors:b.failures,skip:b.tests-b.failures-b.passes,timestamp:(new g).toUTCString(),time:b.duration/1e3},!1)),c.forEach(m),console.log("</testsuite>")})}function m(a){var b={classname:a.parent.fullTitle(),name:a.title,time:a.duration/1e3};if("failed"==a.state){var c=a.err;b.message=f(c.message),console.log(n("testcase",b,!1,n("failure",b,!1,o(c.stack))))}else a.pending?console.log(n("testcase",b,!1,n("skipped",{},!0))):console.log(n("testcase",b,!0))}function n(a,b,c,d){var e=c?"/>":">",g=[],h;for(var i in b)g.push(i+'="'+f(b[i])+'"');return h="<"+a+(g.length?" "+g.join(" "):"")+e,d&&(h+=d+"</"+a+e),h}function o(a){return"<![CDATA["+f(a)+"]]>"}var d=c("./base"),e=c("../utils"),f=e.escape,g=global.Date,h=global.setTimeout,i=global.setInterval,j=global.clearTimeout,k=global.clearInterval;b=a.exports=l,l.prototype=new d,l.prototype.constructor=l}),a.register("runnable.js",function(a,b,c){function k(a,b){this.title=a,this.fn=b,this.async=b&&b.length,this.sync=!this.async,this._timeout=2e3,this.timedOut=!1}var d=c("browser/events").EventEmitter,e=c("browser/debug")("runnable"),f=global.Date,g=global.setTimeout,h=global.setInterval,i=global.clearTimeout,j=global.clearInterval;a.exports=k,k.prototype=new d,k.prototype.constructor=k,k.prototype.timeout=function(a){return 0==arguments.length?this._timeout:(e("timeout %d",a),this._timeout=a,this.timer&&this.resetTimeout(),this)},k.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},k.prototype.clearTimeout=function(){i(this.timer)},k.prototype.resetTimeout=function(){var a=this,b=this.timeout();this.clearTimeout(),b&&(this.timer=g(function(){a.callback(new Error("timeout of "+b+"ms exceeded")),a.timedOut=!0},b))},k.prototype.run=function(a){function j(){if(i)return;i=!0,b.emit("error",new Error("done() called multiple times"))}function k(c){if(b.timedOut)return;if(h)return j();b.clearTimeout(),b.duration=new f-d,h=!0,a(c)}var b=this,c=this.timeout(),d=new f,e=this.ctx,h,i;e&&e.runnable(this),this.async&&c&&(this.timer=g(function(){k(new Error("timeout of "+c+"ms exceeded")),b.timedOut=!0},c)),this.callback=k;if(this.async){try{this.fn.call(e,function(a){if(a instanceof Error)return k(a);if(null!=a)return k(new Error("done() invoked with non-Error: "+a));k()})}catch(l){k(l)}return}try{this.pending||this.fn.call(e),this.duration=new f-d,a()}catch(l){a(l)}}}),a.register("runner.js",function(a,b,c){function i(a){var b=this;this._globals=[],this.suite=a,this.total=a.total(),this.failures=0,this.on("test end",function(a){b.checkGlobals(a)}),this.on("hook end",function(a){b.checkGlobals(a)}),this.grep(/.*/),this.globals(g.keys(global).concat(["errno"]))}var d=c("browser/events").EventEmitter,e=c("browser/debug")("runner"),f=c("./test"),g=c("./utils"),h=function(){};a.exports=i,i.prototype=new d,i.prototype.constructor=i,i.prototype.grep=function(a){return e("grep %s",a),this._grep=a,this.total=this.grepTotal(this.suite),this},i.prototype.grepTotal=function(a){var b=this,c=0;return a.eachTest(function(a){b._grep.test(a.fullTitle())&&c++}),c},i.prototype.globals=function(a){return 0==arguments.length?this._globals:(e("globals %j",a),g.forEach(a,function(a){this._globals.push(a)},this),this)},i.prototype.checkGlobals=function(a){if(this.ignoreLeaks)return;var b=g.filter(g.keys(global),function(a){return!~g.indexOf(this._globals,a)&&(!global.navigator||"onerror"!==a)},this);this._globals=this._globals.concat(b),b.length>1?this.fail(a,new Error("global leaks detected: "+b.join(", ")+"")):b.length&&this.fail(a,new Error("global leak detected: "+b[0]))},i.prototype.fail=function(a,b){++this.failures,a.state="failed","string"==typeof b&&(b=new Error('the string "'+b+'" was thrown, throw an Error :)')),this.emit("fail",a,b)},i.prototype.failHook=function(a,b){this.fail(a,b),this.emit("end")},i.prototype.hook=function(a,b){function h(a){var c=d[a];if(!c)return b();f.currentRunnable=c,f.emit("hook",c),c.on("error",function(a){f.failHook(c,a)}),c.run(function(b){c.removeAllListeners("error");if(b)return f.failHook(c,b);f.emit("hook end",c),h(++a)})}var c=this.suite,d=c["_"+a],e=c._timeout,f=this,g;process.nextTick(function(){h(0)})},i.prototype.hooks=function(a,b,c){function f(g){d.suite=g;if(!g)return d.suite=e,c();d.hook(a,function(a){if(a)return d.suite=e,c(a);f(b.pop())})}var d=this,e=this.suite;f(b.pop())},i.prototype.hookUp=function(a,b){var c=[this.suite].concat(this.parents()).reverse();this.hooks(a,c,b)},i.prototype.hookDown=function(a,b){var c=[this.suite].concat(this.parents());this.hooks(a,c,b)},i.prototype.parents=function(){var a=this.suite,b=[];while(a=a.parent)b.push(a);return b},i.prototype.runTest=function(a){var b=this.test,c=this;try{b.on("error",function(a){c.fail(b,a)}),b.run(a)}catch(d){a(d)}},i.prototype.runTests=function(a,b){function f(g){if(c.failures&&a._bail)return b();e=d.shift();if(!e)return b();if(!c._grep.test(e.fullTitle()))return f();if(e.pending)return c.emit("pending",e),c.emit("test end",e),f();c.emit("test",c.test=e),c.hookDown("beforeEach",function(){c.currentRunnable=c.test,c.runTest(function(a){e=c.test;if(a)return c.fail(e,a),c.emit("test end",e),c.hookUp("afterEach",f);e.state="passed",c.emit("pass",e),c.emit("test end",e),c.hookUp("afterEach",f)})})}var c=this,d=a.tests,e;this.next=f,f()},i.prototype.runSuite=function(a,b){function g(){var b=a.suites[f++];if(!b)return h();d.runSuite(b,g)}function h(){d.suite=a,d.hook("afterAll",function(){d.emit("suite end",a),b()})}var c=this.grepTotal(a),d=this,f=0;e("run suite %s",a.fullTitle());if(!c)return b();this.emit("suite",this.suite=a),this.hook("beforeAll",function(){d.runTests(a,g)})},i.prototype.uncaught=function(a){e("uncaught exception");var b=this.currentRunnable;if("failed"==b.state)return;b.clearTimeout(),a.uncaught=!0,this.fail(b,a);if("test"==b.type){this.emit("test end",b),this.hookUp("afterEach",this.next);return}this.emit("end")},i.prototype.run=function(a){var b=this,a=a||function(){};return e("start"),this.on("end",function(){e("end"),process.removeListener("uncaughtException",this.uncaught),a(b.failures)}),this.emit("start"),this.runSuite(this.suite,function(){e("finished running"),b.emit("end")}),process.on("uncaughtException",function(a){b.uncaught(a)}),this}}),a.register("suite.js",function(a,b,c){function h(a,b){this.title=a,this.ctx=b,this.suites=[],this.tests=[],this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!a,this._timeout=2e3,this._bail=!1}var d=c("browser/events").EventEmitter,e=c("browser/debug")("suite"),f=c("./utils"),g=c("./hook");b=a.exports=h,b.create=function(a,b){var c=new h(b,a.ctx);return c.parent=a,b=c.fullTitle(),a.addSuite(c),c},h.prototype=new d,h.prototype.constructor=h,h.prototype.clone=function(){var a=new h(this.title);return e("clone"),a.ctx=this.ctx,a.timeout(this.timeout()),a.bail(this.bail()),a},h.prototype.timeout=function(a){return 0==arguments.length?this._timeout:(String(a).match(/s$/)&&(a=parseFloat(a)*1e3),e("timeout %d",a),this._timeout=parseInt(a,10),this)},h.prototype.bail=function(a){return 0==arguments.length?this._bail:(e("bail %s",a),this._bail=a,this)},h.prototype.beforeAll=function(a){var b=new g('"before all" hook',a);return b.parent=this,b.timeout(this.timeout()),b.ctx=this.ctx,this._beforeAll.push(b),this.emit("beforeAll",b),this},h.prototype.afterAll=function(a){var b=new g('"after all" hook',a);return b.parent=this,b.timeout(this.timeout()),b.ctx=this.ctx,this._afterAll.push(b),this.emit("afterAll",b),this},h.prototype.beforeEach=function(a){var b=new g('"before each" hook',a);return b.parent=this,b.timeout(this.timeout()),b.ctx=this.ctx,this._beforeEach.push(b),this.emit("beforeEach",b),this},h.prototype.afterEach=function(a){var b=new g('"after each" hook',a);return b.parent=this,b.timeout(this.timeout()),b.ctx=this.ctx,this._afterEach.push(b),this.emit("afterEach",b),this},h.prototype.addSuite=function(a){return a.parent=this,a.timeout(this.timeout()),a.bail(this.bail()),this.suites.push(a),this.emit("suite",a),this},h.prototype.addTest=function(a){return a.parent=this,a.timeout(this.timeout()),a.ctx=this.ctx,this.tests.push(a),this.emit("test",a),this},h.prototype.fullTitle=function(){if(this.parent){var a=this.parent.fullTitle();if(a)return a+" "+this.title}return this.title},h.prototype.total=function(){return f.reduce(this.suites,function(a,b){return a+b.total()},0)+this.tests.length},h.prototype.eachTest=function(a){return f.forEach(this.tests,a),f.forEach(this.suites,function(b){b.eachTest(a)}),this}}),a.register("test.js",function(a,b,c){function e(a,b){d.call(this,a,b),this.pending=!b,this.type="test"}var d=c("./runnable");a.exports=e,e.prototype=new d,e.prototype.constructor=e,e.prototype.inspect=function(){return JSON.stringify(this,function(a,b){return"_"==a[0]?undefined:"parent"==a?"#<Suite>":b},2)}}),a.register("utils.js",function(a,b,c){function i(a){return!~h.indexOf(a)}var d=c("browser/fs"),e=c("browser/path"),f=e.join,g=c("browser/debug")("watch"),h=["node_modules",".git"];b.escape=function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},b.forEach=function(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d)},b.indexOf=function(a,b,c){for(var d=c||0,e=a.length;d<e;d++)if(a[d]===b)return d;return-1},b.reduce=function(a,b,c,d){var e=c;for(var f=0,g=a.length;f<g;f++)e=b.call(d,e,a[f],f,a);return e},b.filter=function(a,b,c){var d=[];for(var e=0,f=a.length;e<f;e++){var g=a[e];b.call(c,g,e,a)&&d.push(g)}return d},b.keys=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b},b.watch=function(a,b){var c={interval:100};a.forEach(function(a){g("file %s",a),d.watchFile(a,c,function(c,d){d.mtime<c.mtime&&b(a)})})},b.files=function(a,c){return c=c||[],d.readdirSync(a).filter(i).forEach(function(e){e=f(a,e),d.statSync(e).isDirectory()?b.files(e,c):e.match(/\.(js|coffee)$/)&&c.push(e)}),c},b.slug=function(a){return a.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")}}),process={},process.exit=function(a){},process.stdout={},global=window,process.nextTick=function(){if(window.ActiveXObject||!window.postMessage)return function(a){a()};var a=[],b="mocha-zero-timeout";return window.addEventListener("message",function(c){c.source==window&&c.data==b&&(c.stopPropagation&&c.stopPropagation(),a.length&&a.shift()())},!0),function(c){a.push(c),window.postMessage(b,"*")}}(),process.removeListener=function(a){"uncaughtException"==a&&(window.onerror=null)},process.on=function(a,b){"uncaughtException"==a&&(window.onerror=b)},window.mocha=a("mocha"),function(){function d(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}function e(){var a=document.getElementsByTagName("code");for(var b=0,c=a.length;b<c;++b)a[b].innerHTML=d(a[b].innerHTML)}function f(a){return b.reduce(a.replace("?","").split("&"),function(a,b){var c=b.indexOf("="),d=b.slice(0,c),e=b.slice(++c);return a[d]=decodeURIComponent(e),a},{})}var a=new mocha.Suite("",new mocha.Context),b=mocha.utils,c={};mocha.setup=function(b){"string"==typeof b?c.ui=b:c=b,ui=mocha.interfaces[c.ui];if(!ui)throw new Error('invalid mocha interface "'+ui+'"');c.timeout&&a.timeout(c.timeout),ui(a),a.emit("pre-require",window)},mocha.run=function(b){a.emit("run");var d=new mocha.Runner(a),g=c.reporter||mocha.reporters.HTML,h=new g(d),i=f(window.location.search||"");return i.grep&&d.grep(new RegExp(i.grep)),c.ignoreLeaks&&(d.ignoreLeaks=!0),c.globals&&d.globals(c.globals),d.globals(["location"]),d.on("end",e),d.run(b)}}()})(),!function(a,b){typeof define=="function"&&typeof define.amd=="object"?define(b):this[a]=b()}("chai",function(){function require(a){var b=require.resolve(a),c=require.modules[b];if(!c)throw new Error('failed to require "'+a+'"');return c.exports||(c.exports={},c.call(c.exports,c,c.exports,require.relative(b))),c.exports}return require.modules={},require.resolve=function(a){var b=a,c=a+".js",d=a+"/index.js";return require.modules[c]&&c||require.modules[d]&&d||b},require.register=function(a,b){require.modules[a]=b},require.relative=function(a){return function(b){if("."!=b[0])return require(b);var c=a.split("/"),d=b.split("/");c.pop();for(var e=0;e<d.length;e++){var f=d[e];".."==f?c.pop():"."!=f&&c.push(f)}return require(c.join("/"))}},require.register("assertion.js",function(a,b,c){function h(a,b,c){this.ssfi=c||arguments.callee,this.obj=a,this.msg=b}var d=c("./error"),e=c("./utils/eql"),f=Object.prototype.toString,g=c("./utils/inspect");a.exports=h,h.includeStack=!1,h.prototype.assert=function(a,b,c,e,f){f=f||this.obj;var b=this.negate?c:b,g=this.negate?!a:a;if(!g)throw new d({message:this.msg?this.msg+": "+b:b,actual:f,expected:e,stackStartFunction:h.includeStack?this.assert:this.ssfi})},Object.defineProperty(h.prototype,"inspect",{get:function(){return g(this.obj)},configurable:!0}),Object.defineProperty(h.prototype,"to",{get:function(){return this},configurable:!0}),Object.defineProperty(h.prototype,"be",{get:function(){return this},configurable:!0}),Object.defineProperty(h.prototype,"been",{get:function(){return this.tense="past",this},configurable:!0}),Object.defineProperty(h.prototype,"an",{get:function(){return this},configurable:!0}),Object.defineProperty(h.prototype,"is",{get:function(){return this},configurable:!0}),Object.defineProperty(h.prototype,"and",{get:function(){return this},configurable:!0}),Object.defineProperty(h.prototype,"have",{get:function(){return this},configurable:!0}),Object.defineProperty(h.prototype,"with",{get:function(){return this},configurable:!0}),Object.defineProperty(h.prototype,"not",{get:function(){return this.negate=!0,this},configurable:!0}),Object.defineProperty(h.prototype,"ok",{get:function(){return this.assert(this.obj,"expected "+this.inspect+" to be truthy","expected "+this.inspect+" to be falsy"),this},configurable:!0}),Object.defineProperty(h.prototype,"true",{get:function(){return this.assert(!0===this.obj,"expected "+this.inspect+" to be true","expected "+this.inspect+" to be false",this.negate?!1:!0),this},configurable:!0}),Object.defineProperty(h.prototype,"false",{get:function(){return this.assert(!1===this.obj,"expected "+this.inspect+" to be false","expected "+this.inspect+" to be true",this.negate?!0:!1),this},configurable:!0}),Object.defineProperty(h.prototype,"exist",{get:function(){return this.assert(null!=this.obj,"expected "+this.inspect+" to exist","expected "+this.inspect+" to not exist"),this},configurable:!0}),Object.defineProperty(h.prototype,"empty",{get:function(){var a=this.obj;return Array.isArray(this.obj)?a=this.obj.length:typeof this.obj=="object"&&(a=Object.keys(this.obj).length),this.assert(!a,"expected "+this.inspect+" to be empty","expected "+this.inspect+" not to be empty"),this},configurable:!0}),Object.defineProperty(h.prototype,"arguments",{get:function(){return this.assert("[object Arguments]"==Object.prototype.toString.call(this.obj),"expected "+this.inspect+" to be arguments","expected "+this.inspect+" to not be arguments","[object Arguments]",Object.prototype.toString.call(this.obj)),this},configurable:!0}),h.prototype.equal=function(a){return this.assert(a===this.obj,"expected "+this.inspect+" to equal "+g(a),"expected "+this.inspect+" to not equal "+g(a),a),this},h.prototype.eql=function(a){return this.assert(e(a,this.obj),"expected "+this.inspect+" to equal "+g(a),"expected "+this.inspect+" to not equal "+g(a),a),this},h.prototype.above=function(a){return this.assert(this.obj>a,"expected "+this.inspect+" to be above "+a,"expected "+this.inspect+" to be below "+a),this},h.prototype.below=function(a){return this.assert(this.obj<a,"expected "+this.inspect+" to be below "+a,"expected "+this.inspect+" to be above "+a),this},h.prototype.within=function(a,b){var c=a+".."+b;return this.assert(this.obj>=a&&this.obj<=b,"expected "+this.inspect+" to be within "+c,"expected "+this.inspect+" to not be within "+c),this},h.prototype.a=function(a){var b=a.charAt(0).toUpperCase()+a.slice(1);return this.assert("[object "+b+"]"===f.call(this.obj),"expected "+this.inspect+" to be a "+a,"expected "+this.inspect+" not to be a "+a,"[object "+b+"]",f.call(this.obj)),this},h.prototype.instanceof=function(a){var b=a.name;return this.assert(this.obj instanceof a,"expected "+this.inspect+" to be an instance of "+b,"expected "+this.inspect+" to not be an instance of "+b),this},h.prototype.property=function(a,b){if(this.negate&&undefined!==b){if(undefined===this.obj[a])throw new Error(this.inspect+" has no property "+g(a))}else this.assert(undefined!==this.obj[a],"expected "+this.inspect+" to have a property "+g(a),"expected "+this.inspect+" to not have property "+g(a));return undefined!==b&&this.assert(b===this.obj[a],"expected "+this.inspect+" to have a property "+g(a)+" of "+g(b)+", but got "+g(this.obj[a]),"expected "+this.inspect+" to not have a property "+g(a)+" of "+g(b),b,this.obj[b]),this.obj=this.obj[a],this},h.prototype.ownProperty=function(a){return this.assert(this.obj.hasOwnProperty(a),"expected "+this.inspect+" to have own property "+g(a),"expected "+this.inspect+" to not have own property "+g(a)),this},h.prototype.length=function(a){(new h(this.obj)).to.have.property("length");var b=this.obj.length;return this.assert(b==a,"expected "+this.inspect+" to have a length of "+a+" but got "+b,"expected "+this.inspect+" to not have a length of "+b,a,b),this},h.prototype.match=function(a){return this.assert(a.exec(this.obj),"expected "+this.inspect+" to match "+a,"expected "+this.inspect+" not to match "+a),this},h.prototype.include=function(a){return this.assert(~this.obj.indexOf(a),"expected "+this.inspect+" to include "+g(a),"expected "+this.inspect+" to not include "+g(a)),this},h.prototype.string=function(a){return(new h(this.obj)).is.a("string"),this.assert(~this.obj.indexOf(a),"expected "+this.inspect+" to contain "+g(a),"expected "+this.inspect+" to not contain "+g(a)),this},Object.defineProperty(h.prototype,"contain",{get:function(){return this.contains=!0,this},configurable:!0}),h.prototype.keys=function(a){var b,c=!0;a=a instanceof Array?a:Array.prototype.slice.call(arguments);if(!a.length)throw new Error("keys required");var d=Object.keys(this.obj),e=a.length;c=a.every(function(a){return~d.indexOf(a)}),!this.negate&&!this.contains&&(c=c&&a.length==d.length);if(e>1){a=a.map(function(a){return g(a)});var f=a.pop();b=a.join(", ")+", and "+f}else b=g(a[0]);return b=(e>1?"keys ":"key ")+b,b=(this.contains?"contain ":"have ")+b,this.assert(c,"expected "+this.inspect+" to "+b,"expected "+this.inspect+" to not "+b,a,Object.keys(this.obj)),this},h.prototype.throw=function(a,b){(new h(this.obj)).is.a("function");var c=!1;arguments.length===0?(b=null,a=null):a&&(a instanceof RegExp||"string"==typeof a)&&(b=a,a=null);try{this.obj()}catch(d){if(a&&"function"==typeof a){this.assert(d instanceof a&&d.name==a.name,"expected "+this.inspect+" to throw "+a.name+" but a "+d.name+" was thrown","expected "+this.inspect+" to not throw "+a.name);if(!b)return this}if(d.message&&b&&b instanceof RegExp)return this.assert(b.exec(d.message),"expected "+this.inspect+" to throw error matching "+b+" but got "+g(d.message),"expected "+this.inspect+" to throw error not matching "+b),this;if(d.message&&b&&"string"==typeof b)return this.assert(~d.message.indexOf(b),"expected "+this.inspect+" to throw error including "+g(b)+" but got "+g(d.message),"expected "+this.inspect+" to throw error not including "+g(b)),this;c=!0}var e=a?a.name:"an error";return this.assert(c===!0,"expected "+this.inspect+" to throw "+e,"expected "+this.inspect+" to not throw "+e),this},h.prototype.respondTo=function(a){var b="function"==typeof this.obj?this.obj.prototype[a]:this.obj[a];return this.assert("function"==typeof b,"expected "+this.inspect+" to respond to "+g(a),"expected "+this.inspect+" to not respond to "+g(a),"function",typeof b),this},h.prototype.satisfy=function(a){return this.assert(a(this.obj),"expected "+this.inspect+" to satisfy "+g(a),"expected "+this.inspect+" to not satisfy"+g(a),this.negate?!1:!0,a(this.obj)),this},h.prototype.closeTo=function(a,b){return this.assert(this.obj-b===a||this.obj+b===a,"expected "+this.inspect+" to be close to "+a+" +/- "+b,"expected "+this.inspect+" not to be close to "+a+" +/- "+b),this},function i(a,b){return h.prototype[b]=h.prototype[a],i}("length","lengthOf")("keys","key")("ownProperty","haveOwnProperty")("above","greaterThan")("below","lessThan")("throw","throws")("throw","Throw")("instanceof","instanceOf")}),require.register("chai.js",function(a,b,c){var d=[],b=a.exports={};b.version="0.5.2",b.Assertion=c("./assertion"),b.AssertionError=c("./error"),b.inspect=c("./utils/inspect"),b.use=function(a){return~d.indexOf(a)||(a(this),d.push(a)),this};var e=c("./interface/expect");b.use(e);var f=c("./interface/should");b.use(f);var g=c("./interface/assert");b.use(g)}),require.register("error.js",function(a,b,c){function e(a){a=a||{},this.name="AssertionError",this.message=a.message,this.actual=a.actual,this.expected=a.expected,this.operator=a.operator;var b=a.stackStartFunction||d;Error.captureStackTrace&&Error.captureStackTrace(this,b)}var d=c("./chai").fail;a.exports=e,e.prototype.__proto__=Error.prototype,e.prototype.toString=function(){return this.message}}),require.register("interface/assert.js",function(module,exports,require){module.exports=function(chai){var Assertion=chai.Assertion,inspect=chai.inspect,assert=chai.assert={};assert.fail=function(a,b,c,d){throw new chai.AssertionError({actual:a,expected:b,message:c,operator:d,stackStartFunction:assert.fail})},assert.ok=function(a,b){(new Assertion(a,b)).is.ok},assert.equal=function(a,b,c){var d=new Assertion(a,c);d.assert(b==d.obj,"expected "+d.inspect+" to equal "+inspect(b),"expected "+d.inspect+" to not equal "+inspect(b))},assert.notEqual=function(a,b,c){var d=new Assertion(a,c);d.assert(b!=d.obj,"expected "+d.inspect+" to equal "+inspect(b),"expected "+d.inspect+" to not equal "+inspect(b))},assert.strictEqual=function(a,b,c){(new Assertion(a,c)).to.equal(b)},assert.notStrictEqual=function(a,b,c){(new Assertion(a,c)).to.not.equal(b)},assert.deepEqual=function(a,b,c){(new Assertion(a,c)).to.eql(b)},assert.notDeepEqual=function(a,b,c){(new Assertion(a,c)).to.not.eql(b)},assert.isTrue=function(a,b){(new Assertion(a,b)).is.true},assert.isFalse=function(a,b){(new Assertion(a,b)).is.false},assert.isNull=function(a,b){(new Assertion(a,b)).to.equal(null)},assert.isNotNull=function(a,b){(new Assertion(a,b)).to.not.equal(null)},assert.isUndefined=function(a,b){(new Assertion(a,b)).to.equal(undefined)},assert.isDefined=function(a,b){(new Assertion(a,b)).to.not.equal(undefined)},assert.isFunction=function(a,b){(new Assertion(a,b)).to.be.a("function")},assert.isObject=function(a,b){(new Assertion(a,b)).to.be.a("object")},assert.isArray=function(a,b){(new Assertion(a,b)).to.be.instanceof(Array)},assert.isString=function(a,b){(new Assertion(a,b)).to.be.a("string")},assert.isNumber=function(a,b){(new Assertion(a,b)).to.be.a("number")},assert.isBoolean=function(a,b){(new Assertion(a,b)).to.be.a("boolean")},assert.typeOf=function(a,b,c){(new Assertion(a,c)).to.be.a(b)},assert.instanceOf=function(a,b,c){(new Assertion(a,c)).to.be.instanceof(b)},assert.include=function(a,b,c){var d=new Assertion(a,c);Array.isArray(a)?d.to.include(b):"string"==typeof a&&d.to.contain.string(b)},assert.match=function(a,b,c){(new Assertion(a,c)).to.match(b)},assert.length=function(a,b,c){(new Assertion(a,c)).to.have.length(b)},assert.throws=function(a,b,c){"string"==typeof b&&(c=b,b=null),(new Assertion(a,c)).to.throw(b)},assert.doesNotThrow=function(a,b,c){"string"==typeof b&&(c=b,b=null),(new Assertion(a,c)).to.not.throw(b)},assert.operator=function(val,operator,val2,msg){if(!~["==","===",">",">=","<","<=","!=","!=="].indexOf(operator))throw new Error('Invalid operator "'+operator+'"');var test=new Assertion(eval(val+operator+val2),msg);test.assert(!0===test.obj,"expected "+inspect(val)+" to be "+operator+" "+inspect(val2),"expected "+inspect(val)+" to not be "+operator+" "+inspect(val2))},assert.ifError=function(a,b){(new Assertion(a,b)).to.not.be.ok},function alias(a,b){return assert[b]=assert[a],alias}("length","lengthOf")("throws","throw")}}),require.register("interface/expect.js",function(a,b,c){a.exports=function(a){a.expect=function(b,c){return new a.Assertion(b,c)}}}),require.register("interface/should.js",function(a,b,c){a.exports=function(a){var b=a.Assertion;a.should=function(){Object.defineProperty(Object.prototype,"should",{set:function(){},get:function(){return this instanceof String||this instanceof Number?new b(this.constructor(this)):this instanceof Boolean?new b(this==1):new b(this)},configurable:!0});var a={};return a.equal=function(a,c){(new b(a)).to.equal(c)},a.throw=function(a,c,d){(new b(a)).to.throw(c,d)},a.exist=function(a){(new b(a)).to.exist},a.not={},a.not.equal=function(a,c){(new b(a)).to.not.equal(c)},a.not.throw=function(a,c,d){(new b(a)).to.not.throw(c,d)},a.not.exist=function(a){(new b(a)).to.not.exist},a}}}),require.register("utils/eql.js",function(a,b,c){function e(a,b){if(a===b)return!0;if(d.isBuffer(a)&&d.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():typeof a!="object"&&typeof b!="object"?a===b:h(a,b)}function f(a){return a===null||a===undefined}function g(a){return Object.prototype.toString.call(a)=="[object Arguments]"}function h(a,b){if(f(a)||f(b))return!1;if(a.prototype!==b.prototype)return!1;if(g(a))return g(b)?(a=pSlice.call(a),b=pSlice.call(b),e(a,b)):!1;try{var c=Object.keys(a),d=Object.keys(b),h,i}catch(j){return!1}if(c.length!=d.length)return!1;c.sort(),d.sort();for(i=c.length-1;i>=0;i--)if(c[i]!=d[i])return!1;for(i=c.length-1;i>=0;i--){h=c[i];if(!e(a[h],b[h]))return!1}return!0}a.exports=e;if(!d)var d={isBuffer:function(){return!1}}}),require.register("utils/inspect.js",function(a,b,c){function d(a,b,c,d){var f={showHidden:b,seen:[],stylize:function(a){return a}};return e(f,a,typeof c=="undefined"?2:c)}function e(a,c,d){if(c&&typeof c.inspect=="function"&&c.inspect!==b.inspect&&(!c.constructor||c.constructor.prototype!==c))return c.inspect(d);var e=f(a,c);if(e)return e;var o=Object.keys(c),p=a.showHidden?Object.getOwnPropertyNames(c):o;if(p.length===0){if(typeof c=="function"){var q=c.name?": "+c.name:"";return a.stylize("[Function"+q+"]","special")}if(l(c))return a.stylize(RegExp.prototype.toString.call(c),"regexp");if(m(c))return a.stylize(Date.prototype.toUTCString.call(c),"date");if(n(c))return g(c)}var r="",s=!1,t=["{","}"];k(c)&&(s=!0,t=["[","]"]);if(typeof c=="function"){var u=c.name?": "+c.name:"";r=" [Function"+u+"]"}l(c)&&(r=" "+RegExp.prototype.toString.call(c)),m(c)&&(r=" "+Date.prototype.toUTCString.call(c)),n(c)&&(r=" "+g(c));if(p.length!==0||!!s&&c.length!=0){if(d<0)return l(c)?a.stylize(RegExp.prototype.toString.call(c),"regexp"):a.stylize("[Object]","special");a.seen.push(c);var v;return s?v=h(a,c,d,o,p):v=p.map(function(b){return i(a,c,d,o,b,s)}),a.seen.pop(),j(v,r,t)}return t[0]+r+t[1]}function f(a,b){switch(typeof b){case"undefined":return a.stylize("undefined","undefined");case"string":var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string");case"number":return a.stylize(""+b,"number");case"boolean":return a.stylize(""+b,"boolean")}if(b===null)return a.stylize("null","null")}function g(a){return"["+Error.prototype.toString.call(a)+"]"}function h(a,b,c,d,e){var f=[];for(var g=0,h=b.length;g<h;++g)Object.prototype.hasOwnProperty.call(b,String(g))?f.push(i(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(i(a,b,c,d,e,!0))}),f}function i(a,b,c,d,f,g){var h,i;b.__lookupGetter__&&(b.__lookupGetter__(f)?b.__lookupSetter__(f)?i=a.stylize("[Getter/Setter]","special"):i=a.stylize("[Getter]","special"):b.__lookupSetter__(f)&&(i=a.stylize("[Setter]","special"))),d.indexOf(f)<0&&(h="["+f+"]"),i||(a.seen.indexOf(b[f])<0?(c===null?i=e(a,b[f],null):i=e(a,b[f],c-1),i.indexOf("\n")>-1&&(g?i=i.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):i="\n"+i.split("\n").map(function(a){return"   "+a}).join("\n"))):i=a.stylize("[Circular]","special"));if(typeof h=="undefined"){if(g&&f.match(/^\d+$/))return i;h=JSON.stringify(""+f),h.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(h=h.substr(1,h.length-2),h=a.stylize(h,"name")):(h=h.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h=a.stylize(h,"string"))}return h+": "+i}function j(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.length+1},0);return e>60?c[0]+(b===""?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function k(a){return Array.isArray(a)||typeof a=="object"&&o(a)==="[object Array]"}function l(a){return typeof a=="object"&&o(a)==="[object RegExp]"}function m(a){return typeof a=="object"&&o(a)==="[object Date]"}function n(a){return typeof a=="object"&&o(a)==="[object Error]"}function o(a){return Object.prototype.toString.call(a)}a.exports=d}),require("chai")}),window.DesignIO=function(){function DesignIO(a,b){b||(b={}),this.callbacks={},this.watchers=[],this.port=b.port||4181,this.namespace=a,this.url=b.url||""+window.location.protocol+"//"+window.location.hostname+":"+this.port,this.socket=io.connect(this.url),this.connect()}return DesignIO.name="DesignIO",DesignIO.prototype.connect=function(){var a,b;return b=this.socket,a=this,b.on("connect",function(){return b.emit("userAgent",a.userAgent()),b.on("watch",function(b){return a.watch(b)}),b.on("exec",function(b){return a.exec(b)})})},DesignIO.prototype.on=function(a,b){return this.callbacks[a]=b},DesignIO.prototype.runCallback=function(a,b){return this.callbacks[a]&&this.callbacks[a].call(this,b),!0},DesignIO.prototype.watch=function(a){var b,c,d,e,f;this.watchers=c=JSON.parse(a,this.reviver).body,f=[];for(d=0,e=c.length;d<e;d++)b=c[d],b.client=this,b.log=function(a){return a.path||(a.path=this.path),a.action||(a.action=this.action),a.timestamp||(a.timestamp=new Date),a.id=this.id,this.client.log(a)},b.hasOwnProperty("connect")?f.push(b.connect()):f.push(void 0);return f},DesignIO.prototype.exec=function(a){var b,c,d,e;a=JSON.parse(a,this.reviver),c=this.watchers;for(d=0,e=c.length;d<e;d++)b=c[d],b.id===a.id&&(b.path=a.path,b.action=a.action,b.hasOwnProperty(a.action)&&b[a.action](a));return this.runCallback(a.action,a)},DesignIO.prototype.log=function(a){return typeof a=="object"&&(a.userAgent=window.navigator.userAgent,a.url=window.location.href,a.namespace=this.namespace),this.socket.emit("log",JSON.stringify(a,this.replacer))},DesignIO.prototype.userAgent=function(){return{userAgent:window.navigator.userAgent,url:window.location.href,namespace:this.namespace}},DesignIO.prototype.replacer=function(a,b){return typeof b=="function"?"("+b+")":b},DesignIO.prototype.reviver=function(key,value){return typeof value!="string"||!value.match(/^(?:\(function\s*\([^\)]*\)\s*\{|\(\/)/)||!value.match(/(?:\}\s*\)|\/\w*\))$/)?value:eval(value)},DesignIO}(),window.designer||(window.designer=new DesignIO("firstApp",{port:4181})),mocha.setup("bdd"),global.assert=chai.assert,global.expect=chai.expect,global.test=it,global.__flash_getWindowLocation=null,global.__flash_getTopLocation=null,$(function(){})